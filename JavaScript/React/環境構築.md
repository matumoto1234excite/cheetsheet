# ç’°å¢ƒæ§‹ç¯‰ãªã©



- [React + TypeScript + ESLint + Storybook](https://qiita.com/ERASER5th/items/b6b7fe4adfc8e862155b)

ã“ã‚Œã‚’è¦‹ã‚Œã°å¤§ä½“è§£æ±ºã™ã‚‹



ãŸã ã—ã€å°‘ã—ã ã‘æœ€æ–°ç‰ˆã¨é•ã†ã£ã½ãã¦ã‚¨ãƒ©ãƒ¼ã‚’åã‹ã‚Œã¦ã—ã¾ã†ã¨ã“ã‚ãŒã‚ã‚‹



ä¸€å¿œã€æœ€åˆã‹ã‚‰è¿½ã£ã¦ã„ãã¾ã™



## ä½¿ã†ã‚‚ã®ã®ç¢ºèª

- **React**

  è¨€ã‚ãšã¨çŸ¥ã‚ŒãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

  ãŠä¸–è©±ã«ãªã‚Šã¾ã™

- **TypeScript**

  è¨€ã‚ãšã¨çŸ¥ã‚ŒãŸé™çš„å‹ä»˜ã‘è¨€èª

  ãŠä¸–è©±ã«ãªã‚Šã¾ã™

- **ESLint**

  è¨€ã‚ãšã¨çŸ¥ã‚ŒãŸJavaScriptã®Linter(ã‚³ãƒ¼ãƒ‰ã®å•é¡Œãªã©ã‚’è§£æã—ã¦ãã‚Œã‚‹é™çš„è§£æãƒ„ãƒ¼ãƒ«)

  ãŠä¸–è©±ã«ãªã‚Šã¾ã™

- **Storybook**

  è¨€ã‚ãšã¨çŸ¥ã‚Œã¦ãªã„UIãƒ†ã‚¹ãƒˆç’°å¢ƒ

  ãŠä¸–è©±ã«ãªã‚Šã¾ã™





## React/TypeScript

ã¾ãšã¯ã€React/TypeScript ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹

å…ˆã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã£ã¦ãŠãå¿…è¦ã¯ãªãã¦ã€æ¬¡ã«èª¬æ˜ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã£ã¦èª¬æ˜ã«å¾“ã£ã¦ã„ã‘ã°ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹



### create-react-app

React ã¯ã™ã¹ã¦ã“ã“ã‹ã‚‰å§‹ã¾ã‚‹

ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ–°ã—ããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹ã®ã§ã€å¥½ããªå ´æ‰€ã«ç§»å‹•ã—ã¦ã‹ã‚‰è¡Œã„ã¾ã—ã‚‡ã†



```bash
$ npx create-react-app ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå --template typescript --use-npm
```



`npx`ã«ã¤ã„ã¦ç°¡å˜ãªèª¬æ˜ã‚’ã™ã‚‹ã¨ã€`npm`ãƒãƒ¼ã‚¸ãƒ§ãƒ³5.2.0ã‚ˆã‚ŠåŒæ¢±ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹

`npm`ã‚³ãƒãƒ³ãƒ‰ã¯åŸºæœ¬çš„ã«`package.json`ã®`scripts`ã®æ¬„ã«ã‚ã‚‹ã‚‚ã®ã‚’å®Ÿè¡Œã™ã‚‹ãŒã€`npx`ã‚³ãƒãƒ³ãƒ‰ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦å®Ÿè¡Œã§ãã‚‹ï¼ˆå®Ÿè¡Œå¾Œã«è‡ªå‹•å‰Šé™¤ã‚‚ã—ã¦ãã‚Œã‚‹ï¼‰

`npx`ã«ã¤ã„ã¦è©³ã—ãã¯ã€Œ[npxã‚³ãƒãƒ³ãƒ‰ã¨ã¯ï¼Ÿä½•ãŒã§ãã‚‹ã®ã‹ï¼Ÿ](https://zenn.dev/ryuu/articles/what-npxcommand)ã€ã‚’ã¿ã¦ãã‚Œï½



**`npx`ã«é–¢ã™ã‚‹è¿½è¨˜**

ã¾ãŸã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Ÿè¡Œã‚‚è¡Œãˆã‚‹

`node_modules`ã«å…¥ã£ã¦ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ä»¥ä¸‹ã®3é€šã‚ŠãŒä¸»ãªæ–¹æ³•

```bash
$ ./node_modules/.bin/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
$ $(npm bin)/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
$ npm run ã‚¿ã‚¹ã‚¯å # package.jsonå†…ã®npm-scriptsã§å®šç¾©ã—ãŸã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
```

`npx`ã‚’ä½¿ã†ã¨ã€ä»¥ä¸‹ã§OK

```bash
$ npx ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
```

ãƒ‘ã‚¹ã‚’æ°—ã«ã—ãŸã‚Šã€`npm-scripts`ã§ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒãªã„

ãƒ­ãƒ¼ã‚«ãƒ«ã«ãªã„ã‚‚ã®ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã—ã€è‡ªå‹•å‰Šé™¤ã‚‚ã™ã‚‹ã‚ˆã£ã¦ã„ã†ã®ãŒä¸Šã§è¨€ã£ã¦ãŸã“ã¨ã­



#### create-react-appã«é–¢ã™ã‚‹æ³¨æ„

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã«è‹±å¤§æ–‡å­—ã¯ä½¿ãˆãªã„ã®ã§ã€ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã ã£ãŸã‚Šæ—¥æœ¬èªã ã£ãŸã‚Šã¯ç„¡ç†

ãƒã‚¤ãƒ•ãƒ³`-`ã¯ä½¿ãˆã‚‹ã‚‰ã—ã„ã®ã§ã€å‘½åè¦å‰‡ã«ã¤ã„ã¦ã¯æ°—ã‚’ä»˜ã‘ã¾ã—ã‚‡ã†



- `--template typescript`

  ç’°å¢ƒã‚’TypeScriptã®ã‚‚ã®ã«ã—ã¦ãã‚Œã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³



- `--use-npm`

  `create-react-app`ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`yarn`ã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã€æ˜ç¤ºçš„ã«`npm`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«æŒ‡å®šã™ã‚‹





## ESLint

`create-react-app`ã‚’ã™ã‚‹ã¨ã€ã™ã§ã«ESLintãŒå°å…¥ã•ã‚Œã¦ãŠã‚Šã€`package.json`ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¼‰ãŒã‚ã‚‹



```json
"eslintConfig": {
  "extends": [
    "react-app",
    "react-app/jest"
  ]
}
```

ã¨ã¯ã„ãˆã€ã¾ã‚‹ã£ã¨è¨­å®šã‚’å®Ÿæ–½ã™ã‚‹ã®ã§ä¸Šè¨˜ã®éƒ¨åˆ†ã¯æ¶ˆã™ã‹ã©ã“ã‹ã«ç§»å‹•ã•ã›ã¦ãŠãã‹ã™ã‚‹



### ESLint ã®åˆæœŸè¨­å®š

ESLint ã«ã‚‚ [å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://eslint.org/docs/user-guide/getting-started) ãŒã‚ã‚‹

`eslint --init`ã‚’ã—ãŸã„ã‚ã‘ã ãŒã€eslint ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸããªã„ã®ã§`npx`ã‚’ç”¨ã„ã‚‹

ãã‚Œã‹å…ˆã«`npm install eslint --save-dev`ã‚’ã—ã¦ã‚‚è‰¯ã„ã€‚ã“ã†ã™ã‚‹ã¨ã€`package.json`ã®`devDependencies`ã«è¿½è¨˜ã•ã‚Œã‚‹ã ã‘ã€ã¤ã¾ã‚Šãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚`npm install --production`ã¨ã™ã‚‹ã¨`devDependencies`ã®ã‚‚ã®ã¯é–¢ä¸ã•ã‚Œãªã„ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒè¡Œãˆã‚‹



ã¡ãªã¿ã«ã€`npm install eslint --save-dev`ã‚’ã›ãšã¨ã‚‚`eslint --init`ã®æœ€å¾Œã§`npm install`ã«èª˜å°ã—ã¦ãã‚Œã‚‹ãŸã‚ã€å®Ÿè¡Œã—ãªãã¦ã‚‚è‰¯ã„



```bash
$ npx eslint --init
```

è¨­å®šå†…å®¹ã‚’èã‹ã‚Œã‚‹ã®ã§ã€è‡ªåˆ†ã®ã‚¢ãƒ—ãƒªã«ã‚ã£ãŸã‚‚ã®ã‚’è¨­å®šã™ã‚‹



React/TypeScript ã®ä¸€ä¾‹ã¯ä»¥ä¸‹

```bash
? What type of modules does your project use? â€¦ 
â¯ JavaScript modules (import/export)
  CommonJS (require/exports)
  None of these
? Which framework does your project use? â€¦ 
â¯ React
  Vue.js
  None of these
? Does your project use TypeScript? No / â¯ Yes
? Where does your code run? â€¦  
â¯ Browser
  Node
? How would you like to define a style for your project? â€¦ 
â¯ Use a popular style guide
  Answer questions about your style
  Inspect your JavaScript file(s)
? Which style guide do you want to follow? â€¦ 
â¯ Airbnb: https://github.com/airbnb/javascript
  Standard: https://github.com/standard/standard
  Google: https://github.com/google/eslint-config-google
? What format do you want your config file to be in? â€¦ 
  JavaScript
  YAML
â¯ JSON
Checking peerDependencies of eslint-config-airbnb@latest
Local ESLint installation not found.
The config that you've selected requires the following dependencies:

eslint-plugin-react@^7.21.5 @typescript-eslint/eslint-plugin@latest eslint-config-airbnb@latest eslint@^5.16.0 || ^6.8.0 || ^7.2.0 eslint-plugin-import@^2.22.1 eslint-plugin-jsx-a11y@^6.4.1 eslint-plugin-react-hooks@^4 || ^3 || ^2.3.0 || ^1.7.0 @typescript-eslint/parser@latest
? Would you like to install them now with npm? No / â¯ Yes
```



ã“ã‚Œã«ã¦ã€`.eslintrc.json`ãŒã§ãã¦ã„ã‚‹ï¼ˆè¨­å®šã«ã‚ˆã£ã¦ã¯`.eslintrc.js`ã‹`.eslintrc.yml`ï¼‰



æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ESLint ã‚’å®Ÿè¡Œã—ã¦`src/`ã®ã‚³ãƒ¼ãƒ‰ã®å†…ä¿®æ­£å¯èƒ½ãªéƒ¨åˆ†ã‚’è‡ªå‹•æ•´å½¢ã—ã¦ãã‚Œã‚‹ï¼ˆã‚ˆã‚Šé©åˆ‡ãªã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¡Œã„ãŸã„å ´åˆã¯`Prettier`ã‚’ä½¿ç”¨ã™ã¹ã—ã€‚è©³ã—ãã¯ã€Œ[ESLintã¨Prettierã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†](https://zenn.dev/t28_tatsuya/articles/integration-of-eslint-and-prettier) ã€ã‚’å‚ç…§ï¼‰

```bash
# ESLint ã«ã‚ˆã‚‹è‡ªå‹•æ•´å½¢
$ npx eslint src/* --fix
```



#### npm-scripts ã«è¿½è¨˜

ã“ã‚Œã‚’æ¯å›æ‰‹æ‰“ã¡ã™ã‚‹ã®ã¯é¢å€’ãªã®ã§ã€`package.json`ã®`npm-scripts`ã«è¿½è¨˜ã™ã‚‹

```json
{
  "scripts": {
    ...,
    "lint": "eslint \"src/**/*.{ts,tsx}\" \"src/*.{ts,tsx}\" --fix"
  }
}
```

ã“ã“ã§ã€`npx`ãŒãªã„ã®ã¯ã€ãã‚‚ãã‚‚`npx`ãŒ`npm run`ã®ä»£ã‚ã‚Šã‚’è¡Œã£ã¦ã„ã‚‹ã‚‚ã®ã ã£ãŸã‹ã‚‰

ãã—ã¦ã€å†å¸°çš„ã«æ‹¡å¼µå­ãŒ`.ts`ã‚‚ã—ãã¯`.tsx`ã®ã‚‚ã®ã‚’è‡ªå‹•æ•´å½¢ã™ã‚‹ãŸã‚ã«globï¼ˆãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã€‚ã¡ãªã¿ã«ã€globã®ç”±æ¥ã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ»ã‚³ãƒãƒ³ãƒ‰ï¼‰ã§æŒ‡å®šã—ã¦ã„ã‚‹

ãŒã€glob ã§ã‚„ã‚‹ã¨ä¸€ã¤ã‚‚è©²å½“ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã¨ãã«ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†ã®ã§ä¸‹è¨˜ã®ã‚ˆã†ã« `--ext`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒè‰¯ã„

```json
{
  "scripts": {
    "lint": "eslint src/ --ext .ts,.tsx --fix"
  }
}
```

â€»`--ext`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ glob ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€**ç„¡è¦–ã•ã‚Œã¦ã—ã¾ã†**ã®ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã«æ³¨æ„ï¼ˆä¾‹ãˆã°ã€`eslint src/** -ext .ts`ãªã©ã¯æ‹¡å¼µå­ã‚’ç„¡è¦–ã—ã¦æ¢ç´¢ã™ã‚‹ï¼‰

eslint ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯[ã“ã“](https://runebook.dev/ja/docs/eslint/user-guide/command-line-interface)ãŒå‚è€ƒã«ãªã‚‹



`npm-scripts` ã«è¿½è¨˜å‡ºæ¥ãŸã‚‰ã€`npm run lint`ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚‹

ã§ã¯ã€è©¦ã—ã«å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†

```bash
$ npm run lint
```



ãŸãã•ã‚“ã‚¨ãƒ©ãƒ¼ãŒã§ãŸğŸ¤ª

ã¾ã ã€`.tsx`ã®è¨­å®šã‚„Reactã®è¨­å®šãŒå…¥ã£ã¦ã„ãªã„ã“ã¨ã§ã‚¨ãƒ©ãƒ¼ãŒã„ãã¤ã‹å‡ºã¦ãã‚‹



ä»¥ä¸‹ã«ã„ãã¤ã‹ã®ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¨ãã®è§£æ±ºæ–¹æ³•ã‚’è¼‰ã›ã‚‹



### ã‚¨ãƒ©ãƒ¼ã®è§£æ±º

`npm run lint`ã‚’å®Ÿè¡Œã™ã‚‹ã¨å‡ºã‚‹ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã—ã¦ã„ã



#### 1. Unable to resolve path to module './App'

ã“ã‚Œã¯ `./App`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‘ã‚¹ã‚’è§£æ±ºã§ããªã„ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹

æ‹¡å¼µå­ãŒ`.tsx`ã¨ãªã£ã¦ã„ã‚‹`App.tsx`ã¯é€šå¸¸ã§ã¯`import/require`ãŒè¡Œãˆãªã„

ãã®ãŸã‚ã€[eslint-import-resolver-typescript](https://www.npmjs.com/package/eslint-import-resolver-typescript)ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã‚‹ã¨è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹



ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹

```bash
$ npm install eslint-import-resolver-typescript --save-dev
```



ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã€`.eslintrc.json`ã«ä»¥ä¸‹ã‚’è¿½è¨˜ã™ã‚‹

```json
{
  "settings": {
    ...,
    "import/resolver": {
      "typescript": {}
    }
  }
}
```

ã“ã®`eslintrc.json`ã«è¨˜è¿°ã™ã‚‹è¨­å®šã¯æœ¬æ¥ã¯ã„ãã¤ã‚‚ã‚ã£ã¦ã€ã‚ã‚‹ç¨‹åº¦çœç•¥ã—ã¦ã„ã‚‹ã ã‘





#### 2. Missing file extension "tsx" for "./App"

ã“ã‚Œã¯ `.eslintrc.json`ã®`import/extensions`ã¨ã„ã†é …ç›®ã§è¨­å®šã§ãã‚‹

ãã‚‚ãã‚‚ã€ãªãœã“ã‚Œã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‹ã¨ã„ã†ã¨ã€Airbnb ã® eslintrc ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹ãŸã‚ï¼ˆè©³ã—ãã¯[ã“ã“](https://github.com/airbnb/javascript/blob/master/packages/eslint-config-airbnb-base/rules/imports.js#L139)ï¼‰



eslintrc ã®å…ˆé ­ã«ã‚ã‚‹ `"error"`ã®é …ç›®ã¯ `{"error", "warn", "off"}`ã®ï¼“ã¤ãŒé¸ã¹ã‚‹ï¼ˆè©³ã—ãã¯[ã“ã“](https://qiita.com/mysticatea/items/f523dab04a25f617c87d#-%E3%83%AB%E3%83%BC%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B)ï¼‰



ã¨ã‚Šã‚ãˆãšã€Airbnb ã®è¨­å®šã‚’ä¸Šæ›¸ãã™ã‚‹å½¢ã§æ–°ã—ã`.eslintrc.json`ã®`rules`ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½åŠ ã™ã‚Œã°ã„ã„

```json
{
  ...,
  "rules": {
    "import/extensions": [
      "error",
      "ignorePackages",
      {
        "ts": "never",
        "tsx": "never"
      }
    ]
  }
}
```



ã¡ãªã¿ã«ã€`import/extensions`ã¯ãªã«ã‚’è¨­å®šã—ã¦ã„ã‚‹ã‹ã¨ã„ã†ã¨ã€

```js
import Hoge from 'Hoge.ts'
import Hoge from 'Hoge'
```

ã¿ãŸã„ãªã€`import`ã®ã¨ãã«æ‹¡å¼µå­ã‚’ã¤ã‘ã‚‹ã‹ã¤ã‘ãªã„ã‹ã‚’è¨­å®šã—ã¦ã„ã‚‹

`ignorePackages`ã§`never`æŒ‡å®šã—ãŸã‚‚ã®ã¯æ‹¡å¼µå­ã‚’ã¤ã‘ãªã„ã§OKï¼ˆã‚€ã—ã‚ã¤ã‘ãŸã‚‰ãƒ€ãƒ¡ï¼Ÿï¼‰





#### 3. 'test' is not defined

ã“ã‚Œã«ã¤ã„ã¦ã¯åŸå› ãŒãªã‚“ãªã®ã‹èª¿ã¹ã¦ã‚‚ã‚ã‹ã‚‰ãªã‹ã£ãŸ

ä¸‹è¨˜ã‚’è¨˜è¿°ã™ã‚‹ã¨ç›´ã‚‹

```json
// eslintrc.json
{
  env: {
    "jest/globals": true,
  },
  plugins: [
    "jest",
  ],
}
```





#### 4. JSX not allowed in files with extension '.tsx'

JSX ã®è¨˜æ³•ãŒè¨±å¯ã•ã‚Œã¦ã„ãªã„æ‹¡å¼µå­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã®ãŒåŸå› 

`.jsx`ã ã‘ã˜ã‚ƒãªãã€`.tsx`ã‚‚è¨±å¯ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

ä»¥ä¸‹ã‚’è¨˜è¿°ã™ã‚Œã°OK

```json
// .eslintrc.json
{
  "rules": {
    "react/jsx-filename-extension": [
      "warn",
      {
        "extensions": [
          ".tsx"
        ]
      }
    ],
  }
}
```





### è¿½åŠ ã®è¨­å®š

ã“ã“ã‹ã‚‰å…ˆã¯ãŸã ã®å®—æ•™





#### 1. ã‚¢ãƒ­ãƒ¼é–¢æ•°ã§è¡¨è¨˜ã™ã‚‹

ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¢ãƒ­ãƒ¼é–¢æ•°ã«ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹

```jsx
function Hoge(props) {
  
};
```

ãŒ

```jsx
const Hoge = (props) => {
  
};
```

ã«ãªã‚‹



```json
// .eslintrc.json
{
  "rules": {
    "react/function-component-definition": [
      2,
      {
        "namedComponents": "arrow-function",
        "unnamedComponents": "arrow-function"
      }
    ],
  }
}
```







#### 2. é–¢æ•°ã®è¿”ã‚Šå€¤ã®å‹ã‚’æ˜ç¤ºçš„ã«è¨˜å…¥ã•ã›ã‚‹



```json
// .eslintrc.json
{
  "rules": {
    "@typescript-eslint/explicit-function-return-type": [
      "error",
      {
        "allowExpressions": true
      }
    ],
  }
}
```





## Storybook



### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Add Storybook:
$ npx sb init
```

ã¨ã™ã‚Œã°è‰¯ã„ã§ã™



ã“ã“ã§ã€`npm install`ã¨ã‹ã§ã¯ãªã„ã®ã‹ã¨ç–‘å•ã‚’æ„Ÿã˜ãŸã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€å…¬å¼ã«ã‚ˆã‚‹ã¨ä¸‹è¨˜ã®ã“ã¨ãŒæ˜è¨€ã•ã‚Œã¦ã„ã‚‹

> Storybook needs to be installed into a project that is already set up with a framework. It will not work on an empty project. There are many ways to bootstrap an app in a given framework, including:
>
> - ğŸ“¦ [Create an Angular Workspace](https://angular.io/cli/new)
>
> - ğŸ“¦ [Create React App](https://reactjs.org/docs/create-a-new-react-app.html)
>
> - ğŸ“¦ [Vue CLI](https://cli.vuejs.org/)
>
> - ğŸ“¦ [Ember CLI](https://guides.emberjs.com/release/getting-started/quick-start/)
>
> - Or any other tooling available.
>
>   ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€https://storybook.js.org/docs/react/get-started/install ã‚ˆã‚Šå‚ç…§ï¼‰



ç©ºã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãã‚‚ãã‚‚æ©Ÿèƒ½ã—ãªã„ã¨è¨€ã‚ã‚Œã¦ãŠã‚Šã€ä»Šå›ã¯ React ãªã®ã§å¤§ä¸ˆå¤«



é€”ä¸­ã§

```
? Do you want to run the 'eslintPlugin' fix on your project?
```

ã¨èã‹ã‚ŒãŸã‚‰ `y`ã‚’å…¥åŠ›ã™ã‚Œã°OK



`src/stories`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç”Ÿæˆã•ã‚Œã‚‹ãŒã€`npm run storybook`ã¨ã™ã‚Œã°èµ·å‹•ã™ã‚‹ãŒ ESLint ã«ã‚ˆã‚Šã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦è½ã¡ã¦ã—ã¾ã†



ã‚ˆã£ã¦ã€å‚è€ƒã¨ã—ã¦ `button.css`, `Button.tsx`, `Button.stories.tsx`,`Introduction.stories.mdx`ã‚’æ®‹ã—ã¦ä»–ã¯æ¶ˆã™



#### 1. `error '@storybook/react' should be listed in the project's dependencies, not devDependencies`

`package.json`ã®`devDependencies`å†…ã‹ã‚‰`"@storybook/react": "^6.4.9",`ã‚’æ¶ˆã—ã€åŒæ§˜ã®å†…å®¹ã‚’`dependencies`å†…ã«è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚`"^6.4.9"`ã®éƒ¨åˆ†ã¯å¤‰ã‚ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ç”Ÿæˆã•ã‚Œã¦ã„ãŸæ–¹ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

#### 2. `error Prop spreading is forbidden`

è©²å½“ã™ã‚‹è¡Œã®ä¸Šã«

```
// eslint-disable-next-line react/jsx-props-no-spreading
```

ã¨æ›¸ãè¾¼ã‚“ã˜ã‚ƒã£ã¦ãã ã•ã„ã€‚è¡Œå„€ãŒæ‚ªã„ã§ã™ãŒã€Storybookç”¨ã®å‹ãŒã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§ã“ã‚Œã§ã©ã†ã«ã‹ã—ã¾ã™ã€‚

#### 3. `error propType "primary" is not required, but has no corresponding defaultProps declaration`

interfaceã”ã¨æ¶ˆã—ã¦ã—ã¾ã£ã¦ãã ã•ã„ã€‚ä»£ã‚ã‚Šã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‹ã‚’å®£è¨€ã—ã¦ãã ã•ã„ã€‚

```tsx
type ButtonProps = {
  label: string,
  primary?: boolean,
  backgroundColor?: string,
  size?: 'small' | 'medium' | 'large',
  onClick?: () => void
}
```

ãã—ã¦ã€Buttonã®å‹å®£è¨€ã‚’ä¿®æ­£ã—ã¾ã™ã€‚



Button.tsx

```tsx
...
const Button: React.VFC<ButtonProps> = ({
  primary = false,
  size = 'medium',
  backgroundColor,
  label,
}) => {
  ...
```

ã¤ã„ã§ã«å¼•æ•°ã‹ã‚‰propsã‚’æ¶ˆã—ã¡ã‚ƒã£ãŸã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«propsã‚’æ¶ˆã—ã¾ã™ã€‚

```tsx
    <button
      type="button"
      className={['storybook-button', `storybook-button--${size}`, mode].join(' ')}
      style={{ backgroundColor }}
    >
```

#### 4. `error Prefer default export`

`Button.tsx`ã®Buttonã®å®£è¨€ã«ã¤ã„ã¦ã„ã‚‹`export`ã‚’å¤–ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€ç•ªä¸‹ã«`export default Button`ã‚’è¿½è¨˜ã€‚

Button.tsx

```tsx
import React from 'react';
import './button.css';

...

const Button: React.VFC<ButtonProps> = ({
  ...
};

export default Button;
```

ã“ã‚Œã«ã‚ˆã£ã¦Button.stories.tsxã§Buttonã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹éƒ¨åˆ†ã‚’ä¿®æ­£ã—ãªã„ã¨ãªã®ã§ã—ã¾ã™ã€‚

Button.stories.tsx

```tsx
import React from 'react';
import { ComponentStory, ComponentMeta } from '@storybook/react';

import Button from './Button';

...
```



#### 4. propType "primary" is not required, but has no corresponding defaultProps declaration

ã†ãƒ¼ã‚“ã€ã‚ˆãã‚ã‹ã‚“ãªã„

ã‚¨ãƒ©ãƒ¼ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ã¨ã‚Šã‚ãˆãš off ã«ã™ã‚‹

```json
{
  "rules":{
     "react/require-default-props": "off"
  }
}
```







ã“ã‚Œã«ã¦Storybookã®è¨­å®šå®Œäº†



